<!DOCTYPE html>
<html>
<head lang="zh-CN">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no,email=no">
    <meta name="author" content="www.tongbaotu.com">
    <title>模仿好买网登录</title>
    <link href="css/base.css" rel="stylesheet" type="text/css">
    <style type="text/css">

        section.logo{
            width: 200px;
            height: 54px;
            background: url("../../images/wap/howbuylogo.png") no-repeat;
            background-size: 200px;
            margin: 30px auto 0;
        }

        .login-form ul.part-01 li input {
            width: 100%;
            height: 43px;
            /*line-height: 43px;*/
            background: none;
        }

        .login-form ul.part-01 li {
            background: url("../../images/wap/icon_2.png") no-repeat #fff;
            height: 45px;
            padding-left: 45px;
            background-size: 25px;
            border: 1px solid #cacaca;
            border-radius: 5px;
            position: relative;
            margin-top: 10px;
        }

        .login-form ul.part-01 li.icon_01 {
            background-position: 12px 7px;
        }

        .login-form ul.part-01 li.icon_02 {
            background-position: 12px -57px;
        }

        .login-form li a.clear-value {
            position: absolute;
            width: 40px;
            height: 40px;
            background: url("../../images/wap/close.png") no-repeat center center #fff;
            background-size: 20px;
            top: 2px;
            right: 0;
            display: none;
        }

        .login-form ul.part-02 {
            margin-top: 10px;
        }

        .login-form ul.part-02 li {
            display: table;
            border: 1px solid #cacaca;
            border-radius: 5px;
            height: 45px;
            width: 100%;
            background-color: #fff;
            margin-bottom: 10px;
            position: relative;

        }

        .login-form ul.part-02 li input {
            height: 43px;
            width: 100%;
            background: none;
            display: table-cell;

        }

        .login-form ul.part-02 li p {
            display: table-cell;
            width: 5em;
            background: none;
            vertical-align: middle;
        }

        .login-form ul.part-02 li .vericode {
            width: 85px;
            height: 40px;
        }

        ul.part-03 li p {
            height: 45px;
            line-height: 45px;
        }

        ul.part-03 li p:first-child {
            float: right;
        }

        ul.part-03 li p:first-child a {
            background: orange;
            display: block;
            width: 7em;
            text-align: center;
            border-radius: 5px;
            color: #fff;
            cursor: pointer;
        }
        ul.part-03 li p:first-child a:active{
            background: #ffc21f;

        }
        ul.part-03 li p:last-child {
            margin-right: 8em;
            border: 1px solid #cacaca;
            border-radius: 5px;
            background-color: #fff;
            line-height: normal;
        }

        ul.part-03 li p:last-child label{
            width: 5em;
            display: block;
            float: left;
            padding-top: 15px;
        }

        ul.part-03 li p:last-child input {
            width: 100%;
            float: right;
            margin-left: -5em;
            padding-left: 5em;
            background: none;
            height: 43px;
        }

        ul.part-03 li p:last-child label {
            padding-left: 10px;
        }
        ul.part-04{
            display: table;
            width: 100%;
            margin-top: 20px;
        }
        ul.part-04 li{
            display: table-cell;
            width: 50%;
        }

        ul.part-04 li *{
            height: 45px;
            line-height: 45px;
            display: block;
            text-align: center;
            background: #2a6aff;
            width: 100%;
            color: #fff;
            border-radius: 5px;
        }

        ul.part-04 li *:active{
            background-color: #43b5ff;
        }

        ul.show-password{
            margin-top: 10px;
        }

        ul.show-password li:first-child{
            float: left;
        }

        ul.show-password li:last-child{
            float: right;
        }

        ul.show-password li:last-child button{
            width: 50px;
            height: 25px;
            padding: 0 2px 0 2px;
            background: url("../../images/wap/icon_fail.png") no-repeat center center;
        }

        ul.show-password li:last-child button span{
            width: 22px;
            height: 21px;
            display: block;
            background: #fff;
            border-radius: 5px;
            float: left;
        }

        ul.show-password li:last-child button span.on{
            float: right;
        }

        .mask-bg{
            position: fixed;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
            -webkit-transition: all .2s;
            -moz-transition: all .2s;
            -ms-transition: all .2s;
            -o-transition: all .2s;
            transition: all .2s;
            left: 0;
            top: 0;
            z-index: 500;
        }

        .error-msg{
            background: rgba(0,0,0,.7);
            text-align: center;
            border-radius: 5px;
            padding: 15px;
            color: #fff;
            width: 50%;
            position: fixed;
            top: 40%;
            left: 25%;
            z-index: 1000;
        }
    </style>
</head>
<body>
<section class="logo"></section>
<section class="login-form p10">
    <form method="post" action="/wap/account/login/login.html" autocomplete="off">
        <ul class="part-01">
            <li class="icon_01">
                <input type="text" id="displayIdNo" placeholder="身份证(18位)" class="pr10 pl10 ui-input-event" maxlength="18">
                <a class="clear-value"></a>
            </li>
            <li class="icon_02">
                <input id="loginPwd" type="password" name="loginPwd" placeholder="6~12位字母和数字组合" class="pr10 pl10 ui-input-event" maxlength="18">
                <a class="clear-value"></a>
            </li>
        </ul>
        <ul class="show-password clearfix">
            <li>显示密码</li>
            <li class="switch">
                <button class="mwui-switch-btn">
                    <span class="off"></span>
                </button>
            </li>
        </ul>
        <ul class="part-02">
            <li>
                <p class="pl10">手机号码</p>
                <input type="text" maxlength="11" class="ui-input-event">
                <a class="clear-value"></a>
            </li>
        </ul>
        <ul class="part-03">
            <li>
                <p><a>获取验证码</a></p>
                <p><label>验证码</label><input type="text"></p>
            </li>
        </ul>
        <ul class="part-04">
            <li class="pr5"><a>免费开户</a></li>
            <li class="pl5"><input value="登  录" type="button" onclick="loginSubmit();"></li>
        </ul>
    </form>
</section>
<!--背景-->
<div class="mask-bg" id="mask-bg-popup" style="display:none"></div>
<!--闪现提示窗-->
<div class="error-msg" style="display:none"></div>

<!--<script src="../../weixin/js/zepto-master/src/zepto.js"></script>-->
<!--<script src="../../weixin/js/zepto-master/src/event.js"></script>-->
<!--<script src="../../weixin/js/zepto-master/src/touch.js"></script>-->
<script src="js/jquery-2.1.3.min.js" type="text/javascript"></script>
<script src="js/validateRule.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">
    $(function() {
//        密码切换开关
        $('.mwui-switch-btn').click(function() {
            var btn = $(this).find("span");
            var change = btn.attr("change");
            btn.toggleClass('on');

            var $i = $("input[name=loginPwd]");
//            var $n = $("input[name=txPwd]");

            if(btn.attr("class") == 'off') {
                $(this).find("input").val("1");
                btn.attr("change", btn.html());
                btn.html(change);
                $(".mwui-switch-btn").css("backgroundImage",'url(https://trade.ehowbuy.com/tstatic/images/wap/icon_fail.png)');
//                $('#account_setpass_p2').html("");
//                $n.attr("type","password");
                $i.attr("type","password");

            } else {
                $(this).find("input").val("0");
                btn.attr("change", btn.html());
                btn.html(change);
                $(".mwui-switch-btn").css("backgroundImage",'url(https://trade.ehowbuy.com/tstatic/images/wap/icon_suc.png)');
//                $('#account_setpass_p2').html("");
//                $n.attr("type","text");
                $i.attr("type","text");

            }
            return false;
        });
    });
</script>
<script>
    function popupTime(msg){
        msg = getMessage(msg);
        $(".error-msg").html(msg).show();
        $(".mask-bg").show();
        setTimeout(function(){$(".error-msg").hide();$(".mask-bg").hide();},2000);
    }
    function popupConfirm(msg,link){
        msg = getMessage(msg);
        $("#mask-bg-popup").addClass("mask-show");
        var defaultMsg = $(".default-msg");
        defaultMsg.find("p").html(msg);
        if(link!=null){
            defaultMsg.find("a").click(function(){
                $("#mask-bg-popup").removeClass("mask-show");
                defaultMsg.hide();
                window.location.href=link;
            });
        }else{
            defaultMsg.find("a").click(function(){
                $("#mask-bg-popup").removeClass("mask-show");
                defaultMsg.hide();
            });
        }
        defaultMsg.show();
    }
    function showLoadingMsg(){
        $(".loading_pop").show();
    }
    function hideLoadingMsg(){
        $(".loading_pop").hide();
    }

    function getMessage(data){
        //判断返回值是 json 格式
        if (data.code){
            //通过这种方法可将字符串转换为对象
            return data.desc+"("+data.code+")";
        }
        return data;
    }
</script>
<script>
    //登录验证
    function loginSubmit(){
        if(isEmpty($('#displayIdNo').val())){
            popupTime('请输入证件号');
            $("#displayIdNo").focus();
            return false;
        }
        if (isEmpty($('#loginPwd').val()))
        {
            popupTime('请输入登录密码');
            $('#loginPwd').focus();
            return false;
        }
        if ($('#displayIdNo').val().indexOf('*')>0 &&  $('#displayIdNo').val()!=''){
            popupTime('请重新输入证件号码');
            $('#displayIdNo').val('');
            $('#displayIdNo').focus();
            return false;
        }
        //重新赋值
        if ($('#displayIdNo').val().indexOf('*')<0){
            $('#idNo').val($('#displayIdNo').val());
        }
        $("#loginButton").attr({"disabled":"disabled"});
        showLoadingMsg();
        $.ajax({
            type: 'post',
            url: "/wap2/account/login/login.htm" ,
            dataType: 'json',
            data:$('#loginForm').serialize(),
            success:function(jsObject){
                hideLoadingMsg();
                $("#loginButton").removeAttr("disabled");
                if(jsObject!=null){
                    if(jsObject.state=='1'){
                        var url="/wap2/account/main/index.htm";
                        var targeturl=$("#targeturl").val();
                        if(""!=targeturl){
                            url="/wap2"+targeturl;
                        }
                        location.href=url;
                    }else if(jsObject.state=='1004'){
                        //激活
                        window.location.href='/wap2/account/openaccount/active.htm'
                    }else{
                        popupTime(jsObject);
                    }
                }
            },
            error : function() {
                hideLoadingMsg();
                $("#loginButton").removeAttr("disabled");
            }
        });
    }

    $(function(){
        //清除input内输入内容
        $(".ui-input-event").each(function(){
            $(this).keyup(function(){
                var $val=$(this).val();
                if($val!=""){
                    $(this).next(".clear-value").show();
                }else{
                    $(this).next(".clear-value").hide();
                }
            });
        });

        //清空input内容
        $(".clear-value").click(function(){
            $(this).prev("input").val("").focus();
            $(this).hide();
        });
    });

</script>
</body>
</html>